/*
 * @Author: xuxueliang
 * @Date: 2019-08-20 16:55:13
 * @LastEditors: xuxueliang
 * @LastEditTime: 2019-08-20 17:13:29
 */
/*eslint-disable */
!function (n) { function e (e) { for (var i, r, l = e[0], u = e[1], s = e[2], p = 0, f = []; p < l.length; p++)r = l[p], Object.prototype.hasOwnProperty.call(o, r) && o[r] && f.push(o[r][0]), o[r] = 0; for (i in u) Object.prototype.hasOwnProperty.call(u, i) && (n[i] = u[i]); for (c && c(e); f.length;)f.shift()(); return a.push.apply(a, s || []), t() } function t () { for (var n, e = 0; e < a.length; e++) { for (var t = a[e], i = !0, l = 1; l < t.length; l++) { var u = t[l]; 0 !== o[u] && (i = !1) } i && (a.splice(e--, 1), n = r(r.s = t[0])) } return n } var i = {}, o = { 0: 0 }, a = []; function r (e) { if (i[e]) return i[e].exports; var t = i[e] = { i: e, l: !1, exports: {} }; return n[e].call(t.exports, t, t.exports, r), t.l = !0, t.exports } r.m = n, r.c = i, r.d = function (n, e, t) { r.o(n, e) || Object.defineProperty(n, e, { enumerable: !0, get: t }) }, r.r = function (n) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(n, "__esModule", { value: !0 }) }, r.t = function (n, e) { if (1 & e && (n = r(n)), 8 & e) return n; if (4 & e && "object" == typeof n && n && n.__esModule) return n; var t = Object.create(null); if (r.r(t), Object.defineProperty(t, "default", { enumerable: !0, value: n }), 2 & e && "string" != typeof n) for (var i in n) r.d(t, i, function (e) { return n[e] }.bind(null, i)); return t }, r.n = function (n) { var e = n && n.__esModule ? function () { return n.default } : function () { return n }; return r.d(e, "a", e), e }, r.o = function (n, e) { return Object.prototype.hasOwnProperty.call(n, e) }, r.p = ""; var l = window.webpackJsonp = window.webpackJsonp || [], u = l.push.bind(l); l.push = e, l = l.slice(); for (var s = 0; s < l.length; s++)e(l[s]); var c = u; a.push(["tjUo", 1]), t() }({ ESYt: function (n, e, t) { (n.exports = t("JPst")(!1)).push([n.i, "[scope],\n[root] {\n  max-width: 100%;\n  max-height: 100%;\n  height: 100%;\n}\n.upfile {\n  width: 100%;\n  height: 100%;\n}\n.upfile label {\n  position: relative;\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.upfile label input {\n  position: absolute;\n  opacity: 0;\n}\n.upfile label .showimg {\n  width: 100%;\n  height: 100%;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.upfile label p {\n  font-size: 30PX;\n  text-align: center;\n}\nlabel .loading {\n  position: absolute;\n  text-align: center;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  margin: auto;\n  width: 100PX;\n  height: 96PX;\n}\nlabel .loading p {\n  font-size: 14PX;\n}\nlabel .loading span {\n  height: 4PX;\n  border-radius: 4PX;\n  display: inline-block;\n  background: #ffbe22;\n  width: 4PX;\n  -webkit-animation: loading 2s ease-in-out infinite alternate;\n          animation: loading 2s ease-in-out infinite alternate;\n}\n", ""]) }, "nDq/": function (n, e, t) { }, tjUo: function (n, e, t) { "use strict"; t.r(e), t("nDq/"); var i = t("lwsE"), o = t.n(i), a = t("W8MJ"), r = t.n(a), l = t("a1gu"), u = t.n(l), s = t("Nsbk"), c = t.n(s), p = t("7W2i"), f = t.n(p), d = t("9gjU"), h = t.n(d); Object(d.Component)({ tagName: "up-img", style: t("ESYt"), props: ["serverurl", "title", "type"], canBeCalledExt: !0 })(function (n) { function e () { return o()(this, e), u()(this, c()(e).apply(this, arguments)) } return f()(e, n), r()(e, [{ key: "$data", value: function () { return { imgUrl: "", isLoading: !1, loadingInfo: "加载中..." } } }, { key: "$created", value: function () { console.log(this.title) } }, { key: "change", value: function (n) { this.isLoading = !0, this.loadingInfo = "加载中...", this.serverurl ? this.upLoad(n.target.files[0]) : this.updateUrl({ picUrl: function (n) { var e = ""; try { var t = null; n.files && n.files[0] ? t = n.files[0] : n.files && n.files.item(0) && (t = n.files.item(0)); try { e = t.getAsDataURL() } catch (n) { e = window.URL.createObjectURL(t) } } catch (t) { if (n.files && n.files[0]) { var i = new FileReader; i.onload = function (n) { e = n.target.result }, i.readAsDataURL(n.files[0]) } } return e }(n.target) }) } }, { key: "updateUrl", value: function (n) { this.imgUrl = n.picUrl, this.emitProp("uploadok", n), this.isLoading = !1 } }, { key: "upLoad", value: function (n) { var e = this, t = new FormData; return t.append("type", this.type || 0), t.append("picFile", n, n.name), console.log(n), window.fetch(this.serverurl, { method: "post", body: t, timeout: 1e4 }).then(function (n) { return n.json() }).then(function (n) { e.updateUrl(n) }).catch(function (n) { e.loadingInfo = "加载失败", setTimeout(function () { e.isLoading = !1 }, 500), console.log(n) }), !1 } }, { key: "loading", value: function () { return h.a.__createElement("div", { onClick: function (n) { n.preventDefault() }, class: "loading" }, h.a.__createElement("p", null, this.loadingInfo), h.a.__createElement("span", null)) } }, { key: "render", value: function () { return console.log(this.imgUrl), h.a.__createElement("div", { class: "upfile" }, h.a.__createElement("label", null, h.a.__createElement("input", { type: "file", onChange: this.change.bind(this), accecpt: "image/*" }), this.imgUrl ? h.a.__createElement("div", { class: "showimg", style: { backgroundImage: "url(" + this.imgUrl + ")" } }) : this.isLoading ? "" : h.a.__createElement("p", null, "+"), this.isLoading ? this.loading() : "")) } }]), e }(h.a)) } });