(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"Ab++":function(e,t,i){"use strict";i.r(t);var n,a=i("lwsE"),l=i.n(a),s=i("W8MJ"),o=i.n(s),r=i("a1gu"),u=i.n(r),c=i("Nsbk"),f=i.n(c),d=i("7W2i"),h=i.n(d),g=i("PkOh"),p=i("GJk0"),m=i.n(p),v=Object(g.a)({tagName:"up-img",style:m.a,props:["serverurl","title","type","suffix","canEdit","selelctOnly"],canBeCalledExt:!0})(n=function(e){function t(){return l()(this,t),u()(this,f()(t).apply(this,arguments))}return h()(t,e),o()(t,[{key:"$data",value:function(){return{imgUrl:"",isLoading:!1,loadingInfo:"加载中..."}}},{key:"$created",value:function(){console.log(this.title)}},{key:"change",value:function(e){e.target.files&&e.target.files[0]&&e.target.files[0].name&&(this.isLoading=!0,this.loadingInfo="加载中...",this.serverurl?this.upLoad(e.target.files[0]):this.updateUrl({picUrl:function(e){var t="";try{var i=null;e.files&&e.files[0]?i=e.files[0]:e.files&&e.files.item(0)&&(i=e.files.item(0)),e.value="";try{t=i.getAsDataURL()}catch(e){t=window.URL.createObjectURL(i)}}catch(i){if(e.files&&e.files[0]){var n=new FileReader;n.onload=function(e){t=e.target.result},n.readAsDataURL(e.files[0])}}return t}(e.target)}))}},{key:"updateUrl",value:function(e){this.emitProp("uploadok",e),this.selelctOnly||(this.imgUrl=e.picUrl),this.isLoading=!1}},{key:"upLoad",value:function(e){var t=this,i=new FormData;return i.append("type",this.type||0),i.append("picFile",e,e.name),window.fetch(this.serverurl,{method:"post",body:i,timeout:1e4}).then((function(e){return e.json()})).then((function(e){t.updateUrl(e)})).catch((function(e){t.loadingInfo="加载失败",setTimeout((function(){t.isLoading=!1}),500),console.log(e)})).finally((function(){setTimeout((function(){t.isLoading=!1}),500)})),!1}},{key:"loading",value:function(){return g.b.__createElement("div",{onClick:function(e){e.preventDefault()},className:"loading"},g.b.__createElement("div",null,this.loadingInfo),g.b.__createElement("span",null))}},{key:"render",value:function(){return g.b.__createElement("div",{className:"upfile ".concat(this.imgUrl?"":"showbk")},g.b.__createElement("label",null,g.b.__createElement("input",{type:"file",onChange:this.change.bind(this),accept:"image/*"}),this.imgUrl?g.b.__createElement("div",{className:"showimg",style:{backgroundImage:"url("+this.imgUrl+(this.suffix||"")+")"}}):this.isLoading?"":g.b.__createElement("span",null,"+"),this.isLoading?this.loading():""))}}]),t}(g.b))||n;t.default=v},GJk0:function(e,t,i){}}]);